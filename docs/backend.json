{
  "entities": {
    "user": {
      "title": "User",
      "description": "A user of the application, for presence.",
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "The user's unique ID."
        },
        "name": {
          "type": "string",
          "description": "The user's display name."
        },
        "avatar": {
          "type": "string",
          "description": "URL to the user's avatar image."
        },
        "online": {
          "type": "boolean",
          "description": "Whether the user is currently online."
        },
        "callState": {
          "type": "string",
          "description": "The user's current call state (e.g., idle, searching, connected)."
        }
      },
      "required": ["id", "name", "avatar", "online"]
    },
    "room": {
      "title": "Room",
      "description": "A WebRTC signaling room.",
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "callerId": {
            "type": "string"
        },
        "callerName": {
            "type": "string"
        },
        "callerAvatar": {
            "type": "string"
        },
        "calleeId": {
            "type": "string"
        },
        "calleeName": {
            "type": "string"
        },
        "calleeAvatar": {
            "type": "string"
        },
        "answered": {
            "type": "boolean"
        }
      }
    },
    "offer": {
      "title": "Offer",
      "description": "An SDP offer for a WebRTC connection.",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["offer"]
        },
        "sdp": {
          "type": "string"
        }
      },
      "required": ["type", "sdp"]
    },
    "answer": {
      "title": "Answer",
      "description": "An SDP answer for a WebRTC connection.",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["answer"]
        },
        "sdp": {
          "type": "string"
        }
      },
      "required": ["type", "sdp"]
    },
    "iceCandidate": {
      "title": "ICE Candidate",
      "description": "An ICE candidate for a WebRTC connection.",
      "type": "object",
      "properties": {
        "candidate": {
          "type": "string"
        },
        "sdpMid": {
          "type": "string"
        },
        "sdpMLineIndex": {
          "type": "number"
        }
      },
      "required": ["candidate", "sdpMid", "sdpMLineIndex"]
    },
    "friendRequest": {
      "title": "Friend Request",
      "description": "A request from one user to befriend another.",
      "type": "object",
      "properties": {
        "fromId": { "type": "string" },
        "fromName": { "type": "string" },
        "fromAvatar": { "type": "string" },
        "toId": { "type": "string" },
        "toName": { "type": "string" },
        "toAvatar": { "type": "string" },
        "status": { "type": "string", "enum": ["pending", "accepted", "rejected"] },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["fromId", "fromName", "toId", "toName", "status", "createdAt"]
    }
  },
  "auth": {
    "providers": []
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/backend/entities/user"
      },
      "description": "User profile information for presence."
    },
    "/rooms/{roomId}": {
      "schema": {
        "$ref": "#/backend/entities/room"
      },
      "description": "WebRTC signaling rooms, available for a short time."
    },
    "/rooms/{roomId}/callerCandidates/{candidateId}": {
      "schema": {
        "$ref": "#/backend/entities/iceCandidate"
      },
      "description": "ICE candidates from the caller."
    },
    "/rooms/{roomId}/calleeCandidates/{candidateId}": {
      "schema": {
        "$ref": "#/backend/entities/iceCandidate"
      },
      "description": "ICE candidates from the callee."
    },
    "/friendRequests/{requestId}": {
      "schema": {
        "$ref": "#/backend/entities/friendRequest"
      },
      "description": "Friend requests between users."
    }
  }
}
