{
  "entities": {
    "user": {
      "title": "User",
      "description": "A user of the application.",
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "The user's unique ID."
        },
        "name": {
          "type": "string",
          "description": "The user's display name."
        },
        "avatar": {
          "type": "string",
          "description": "URL to the user's avatar image."
        },
        "online": {
          "type": "boolean",
          "description": "Whether the user is currently online."
        }
      },
      "required": ["id", "name", "avatar"]
    },
    "call": {
      "title": "Call",
      "description": "A record of a call between two users.",
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "callerId": {
          "type": "string"
        },
        "calleeId": {
          "type": "string"
        },
        "startedAt": {
          "type": "string",
          "format": "date-time"
        },
        "duration": {
          "type": "number",
          "description": "Duration of the call in seconds."
        }
      },
      "required": ["callerId", "calleeId", "startedAt"]
    },
    "friend": {
      "title": "Friend",
      "description": "A friendship link between two users.",
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "friendId": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": ["friendId", "createdAt"]
    },
    "room": {
      "title": "Room",
      "description": "A WebRTC signaling room.",
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "callerId": {
            "type": "string"
        },
        "callerName": {
            "type": "string"
        },
        "callerAvatar": {
            "type": "string"
        }
      }
    },
    "offer": {
      "title": "Offer",
      "description": "An SDP offer for a WebRTC connection.",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["offer"]
        },
        "sdp": {
          "type": "string"
        }
      },
      "required": ["type", "sdp"]
    },
    "answer": {
      "title": "Answer",
      "description": "An SDP answer for a WebRTC connection.",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["answer"]
        },
        "sdp": {
          "type": "string"
        }
      },
      "required": ["type", "sdp"]
    },
    "iceCandidate": {
      "title": "ICE Candidate",
      "description": "An ICE candidate for a WebRTC connection.",
      "type": "object",
      "properties": {
        "candidate": {
          "type": "string"
        },
        "sdpMid": {
          "type": "string"
        },
        "sdpMLineIndex": {
          "type": "number"
        }
      },
      "required": ["candidate", "sdpMid", "sdpMLineIndex"]
    }
  },
  "auth": {
    "providers": [
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/backend/entities/user"
      },
      "description": "User profile information."
    },
    "/users/{userId}/calls/{callId}": {
      "schema": {
        "$ref": "#/backend/entities/call"
      },
      "description": "A user's call history."
    },
    "/users/{userId}/friends/{friendId}": {
      "schema": {
        "$ref": "#/backend/entities/friend"
      },
      "description": "A user's list of friends."
    },
    "/rooms/{roomId}": {
      "schema": {
        "$ref": "#/backend/entities/room"
      },
      "description": "WebRTC signaling rooms, available for a short time."
    },
    "/rooms/{roomId}/offer": {
      "schema": {
        "$ref": "#/backend/entities/offer"
      },
      "description": "WebRTC offer for a room."
    },
    "/rooms/{roomId}/answer": {
      "schema": {
        "$ref": "#/backend/entities/answer"
      },
      "description": "WebRTC answer for a room."
    },
    "/rooms/{roomId}/callerCandidates/{candidateId}": {
      "schema": {
        "$ref": "#/backend/entities/iceCandidate"
      },
      "description": "ICE candidates from the caller."
    },
    "/rooms/{roomId}/calleeCandidates/{candidateId}": {
      "schema": {
        "$ref": "#/backend/entities/iceCandidate"
      },
      "description": "ICE candidates from the callee."
    }
  }
}